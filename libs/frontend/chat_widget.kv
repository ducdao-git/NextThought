<ChatView>
    orientation: 'horizontal'
    size_hint: 1, None
    height: self.minimum_height

    canvas.before:
        Color:
            rgba: [0, 0.5, 0, 0]
        Rectangle:
            pos: self.pos
            size: self.size

    Label:
        size_hint: 1, None
        height: dp(64)
        markup: True
        color: app.theme_palette['primary_color']
        text: '%s' % icon('user-circle', int(sp(35)))

    BoxLayout:
        id: chat_info_holder
        orientation: 'vertical'
        size_hint: 5, 1
        padding: dp(0), dp(8), dp(12), dp(8)

        canvas.before:
            Color:
                rgba: app.theme_palette['divider_color']
            Rectangle:
                pos: self.pos
                size: self.size[0] - dp(12), dp(1.5)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 1, 1

            Label:
                id: chat_partner_name
                size_hint: 4, 1
                text_size: self.width, None
                bold: True
                shorten: True
                shorten_from: 'right'
                color: app.theme_palette['text_background_color']

            Label:
                id: last_message_time
                size_hint: 1, 1
                text_size: self.width, None
                halign: 'right'
                color: app.theme_palette['support_text_color']

        Label:
            id: last_message_preview
            size_hint: 1, 1
            text_size: self.width, None
            shorten: True
            shorten_from: 'right'
            color: app.theme_palette['text_background_color']


<MessageContentLabel>
    size_hint: None, None
    size: self.texture_size
    halign: 'left'
    markup: True
    padding: dp(8), dp(8)

    background_normal: ''
    background_down: ''
    background_color: app.theme_palette['user_message_background_color']
    color: app.theme_palette['user_message_color']

    partner_bg_color: app.theme_palette['partner_message_background_color']
    partner_text_color: app.theme_palette['partner_message_color']


<UserMessageView>
    orientation: 'vertical'
    size_hint: 1, None
    height: self.minimum_height
    padding: dp(8), dp(4)

    Label:
        id: message_send_time
        size_hint: 1, None
        height: self.texture_size[1]
        padding: dp(4), dp(4)
        font_size: sp(14)
        color: app.theme_palette['support_text_color']

<PartnerMessageView>
    orientation: 'vertical'
    size_hint: 1, None
    height: self.minimum_height
    padding: dp(8), dp(4)

    Label:
        id: message_send_time
        size_hint: 1, None
        height: self.texture_size[1]
        padding: dp(4), dp(4)
        font_size: sp(14)
        color: app.theme_palette['support_text_color']